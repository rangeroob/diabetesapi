require 'rake/testtask'
require 'fileutils'
Rake::TestTask.new do |t|
  t.libs << 'test'
  t.pattern = 'test/test_*.rb'
  at_exit do
    if File.exist?('db/test.sqlite3')
      FileUtils.remove_entry_secure('db/test.sqlite3')
    end
  end
end

task :createdb do
  ruby 'setup/createdb.rb'
end

task :removedb do
  ruby 'setup/removedb.rb'
end
